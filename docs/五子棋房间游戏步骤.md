# 五子棋房间游戏步骤

## 基础业务流程

### 1. 房间创建与进入

1. **玩家创建房间**
   - 玩家在大厅点击"创建房间"
   - 系统创建房间，生成 `roomId`
   - 创建房间的玩家自动成为**房主**

2. **房主进入房间**
   - 房主自动进入房间页面
   - 房主默认执**黑棋**（X）
   - 房主初始状态：**未准备**

### 2. 等待对手阶段

3. **对手玩家进入**
   - 其他玩家通过房间ID进入房间
   - 对手玩家自动执**白棋**（O）
   - 对手玩家初始状态：**未准备**

### 3. 准备阶段

4. **准备按钮交互**
   - 双方玩家都显示"准备"按钮
   - 玩家点击"准备"按钮后：
     - 按钮文字变为"取消准备"
     - 玩家状态变为"已准备"
   - 玩家点击"取消准备"按钮后：
     - 按钮文字变回"准备"
     - 玩家状态变为"未准备"

5. **开始游戏条件**
   - 当**2名玩家都准备好**时：
     - 房主可以看到"开始"按钮
     - 房主可以点击"开始"按钮开始对局
   - 如果任何一方取消准备：
     - 房主的"开始"按钮隐藏或禁用

### 4. 对局开始前限制

6. **落子限制**
   - 对局开始前（房间状态为 `WAITING`）：
     - 棋盘允许点击落子（UI不阻止）
     - 但**落子无效**（后端拒绝或忽略）
     - 前端可以显示提示："请先准备并开始游戏"

---

## 状态说明

### 玩家状态
- **未准备**：玩家刚进入房间或取消准备后的状态
- **已准备**：玩家点击"准备"按钮后的状态

### 房间状态
- **WAITING**：等待开始阶段
  - 玩家可以准备/取消准备
  - 不允许有效落子
- **PLAYING**：对局进行中（待后续补充）
- **ENDED**：对局已结束（待后续补充）

---

## 角色说明

### 房主
- 创建房间的玩家
- 默认执黑棋（X）
- 拥有"开始游戏"的权限
- 当所有玩家准备好时，可以点击"开始"按钮

### 对手玩家
- 通过房间ID进入的玩家
- 自动执白棋（O）
- 可以准备/取消准备
- 不能开始游戏（只有房主可以）

---

## 注意事项

1. 房主默认黑棋，对手默认白棋（固定分配，不可选择）
2. 准备状态是独立的，每个玩家可以单独准备/取消准备
3. 只有所有玩家都准备好时，房主才能开始游戏
4. 对局开始前，落子操作在UI上允许，但后端会拒绝，确保数据一致性
5. 后续还有更复杂的业务逻辑需要补充

---

## 待补充内容

- 对局进行中的详细流程
- 对局结束后的处理
- 重开游戏的流程
- 玩家离开/断线重连的处理
- PVE模式的特殊流程
- 观战者功能
- 其他复杂业务逻辑



